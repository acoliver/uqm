# Phase 06: C Header Redirect — Stub

## Phase ID
`PLAN-20260224-MEM-SWAP.P06`

## Completion
- **Timestamp**: 2026-02-24
- **Status**: COMPLETE

## Files Changed
1. `sc2/src/libs/memlib.h` — Added `#ifdef USE_RUST_MEM` block with 6 extern declarations for `rust_*` functions + 6 `#define` macros; original C declarations preserved in `#else` block
2. `sc2/src/libs/memory/w_memlib.c` — Added `#ifdef USE_RUST_MEM` / `#error` guard at top (before copyright, matching `files.c` pattern)
3. `sc2/src/libs/memory/Makeinfo` — Added conditional to exclude `w_memlib.c` when `USE_RUST_MEM` is set (matching `file/Makeinfo` pattern)
4. `sc2/config_unix.h` — Added commented-out `/* #define USE_RUST_MEM */` after existing `USE_RUST_*` block
5. `sc2/build.vars.in` — Added `USE_RUST_MEM`/`uqm_USE_RUST_MEM`/`SYMBOL_USE_RUST_MEM_DEF` entries in all 8 locations (matching `USE_RUST_MIXER` pattern)
6. `sc2/src/config_unix.h.in` — Added `@SYMBOL_USE_RUST_MEM_DEF@` after existing `USE_RUST_*` block

## Tests Added/Updated
None (C-side structural changes only)

## Verification Outputs

### C Build (flag OFF — C path active)
```
make: `uqm' is up to date.
Exit Code: 0
```

### Rust Tests
```
test result: ok. 1163 passed; 0 failed; 4 ignored; 0 measured; 0 filtered out
```

### Structural Verification
- `memlib.h`: `#ifdef USE_RUST_MEM` with 6 extern + 6 macros + `#else` with original C declarations [OK]
- `w_memlib.c`: `#ifdef USE_RUST_MEM` / `#error` at top [OK]
- `Makeinfo`: Conditional checking `USE_RUST_MEM` / `uqm_USE_RUST_MEM` [OK]
- `config_unix.h`: Commented-out `/* #define USE_RUST_MEM */` [OK]
- `build.vars.in`: All 8 entries (uqm_USE_RUST_MEM, USE_RUST_MEM, both exports × 2, uqm_SYMBOL, SYMBOL, both SYMBOL exports) [OK]
- `config_unix.h.in`: `@SYMBOL_USE_RUST_MEM_DEF@` after existing block [OK]

### Deferred Implementation Detection
No TODO/FIXME/HACK/placeholder markers found in any modified file.

## Semantic Verification Summary
- C path still works — build compiles and links with C memory functions [OK]
- No behavioral change — flag is commented out, game behavior identical [OK]
- `#ifdef` / `#else` / `#endif` structure correct in `memlib.h` [OK]
- `#error` message clear and follows established pattern (`files.c`, `clock.c`, etc.) [OK]
- Makeinfo conditional matches `libs/file/Makeinfo` pattern [OK]
- `types.h` → `config.h` → `config_unix.h` include chain ensures `USE_RUST_MEM` visibility [OK]
