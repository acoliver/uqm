# Phase 15: Resource Dispatch — Stub (COMPLETE)

## Phase ID
`PLAN-20260224-RES-SWAP.P15`

## Completion Date
2026-02-24

## What was done
Created `rust/src/resource/dispatch.rs` with full implementation (combined P15 stub + P17 impl):

### Structs
- `FullResourceDesc` — combined resource descriptor with fname, res_type, ResourceData union, refcount, type_handler_key, and owned CString for pointer stability
- `ResourceDispatch` — main dispatch system with entries HashMap, TypeRegistry, and cur_resfile_name

### Methods (all fully implemented, no stubs)
- `new()` — empty dispatch system
- `process_resource_desc(key, value)` — parse TYPE:path, call loadFun immediately for value types
- `get_resource(key) -> *mut c_void` — lazy load via loadFun, increment refcount
- `free_resource(key)` — decrement refcount, call freeFun at zero
- `detach_resource(key) -> *mut c_void` — ownership transfer, fail if refcount > 1
- `remove_resource(key) -> bool` — free and remove from map
- `get_int_resource(key) -> Option<u32>` — direct num access
- `get_boolean_resource(key) -> Option<bool>` — num != 0
- `get_string_resource(key) -> Option<&str>` — fname access
- `get_resource_type(key) -> Option<&str>` — type name access

### Module registered in mod.rs

## Structural Verification
- [x] `dispatch.rs` created with all methods
- [x] Module registered in `mod.rs`
- [x] Plan markers present (@plan PLAN-20260224-RES-SWAP.P15, P17)
- [x] Requirement markers present (@requirement REQ-RES-026-046, REQ-RES-083-085, REQ-RES-101-103)

## Semantic Verification
- [x] Compilation succeeds
- [x] All existing tests pass (1281 passed, 0 failed, 4 ignored)
