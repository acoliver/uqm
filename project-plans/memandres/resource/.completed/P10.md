# Phase 10: Config API — TDD [OK]

## Phase ID
`PLAN-20260224-RES-SWAP.P10`

## Completion Date
2026-02-24

## What Was Done
Added 26 comprehensive tests in `config_api.rs` covering:

### Put/Get Roundtrip Tests
- `test_put_get_string` — STRING put and retrieve
- `test_put_get_integer` — INT32 put and retrieve
- `test_put_get_boolean` — BOOLEAN put and retrieve (true and false)
- `test_put_get_color` — COLOR put and retrieve (opaque)
- `test_put_get_color_with_alpha` — COLOR put and retrieve (transparent)
- `test_put_negative_integer` — negative INT32 values

### Auto-creation and Override Tests
- `test_put_overwrites` — put same key twice overwrites value
- `test_put_auto_creates` — put to non-existent key creates entry
- `test_put_type_change` — put STRING over INT32 replaces type

### Type Checking Tests
- `test_get_missing` — all 4 getters return None for missing keys
- `test_get_wrong_type_returns_none` — cross-type gets return None

### Serialization Tests
- `test_serialize_string` — "STRING:value"
- `test_serialize_integer` — "INT32:42"
- `test_serialize_boolean_true` — "BOOLEAN:true"
- `test_serialize_boolean_false` — "BOOLEAN:false"
- `test_serialize_color_opaque` — "COLOR:rgb(0xff, 0x80, 0x40)"
- `test_serialize_color_transparent` — "COLOR:rgba(0xff, 0x80, 0x40, 0xc8)"
- `test_serialize_negative_integer` — "INT32:-42"

### SaveResourceIndex Tests
- `test_save_resource_index_basic` — multiple entries serialized
- `test_save_resource_index_root_filter` — only entries with prefix
- `test_save_resource_index_strip_root` — prefix stripped from keys
- `test_save_resource_index_empty` — empty map produces empty string
- `test_save_resource_index_sorted` — deterministic key ordering
- `test_save_resource_index_color_format` — opaque color format
- `test_save_resource_index_color_alpha_format` — transparent color format

## Verification
```
cargo test --lib --all-features — all 26 config_api tests pass
```
